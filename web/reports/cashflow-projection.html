<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monthly Cashflow Projection - Stabilis</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .report-container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 2rem;
        }

        .report-header {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 2rem;
            border-radius: 1rem;
            margin-bottom: 2rem;
        }

        .report-header h1 {
            margin: 0 0 0.5rem 0;
            font-size: 2rem;
        }

        .report-controls {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .report-controls select {
            padding: 0.5rem 1rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 0.5rem;
            background: rgba(255, 255, 255, 0.15);
            color: white;
            font-size: 0.875rem;
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: white;
            color: #10b981;
            border: none;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.2s;
        }

        .back-btn:hover {
            background: #f0fdf4;
            transform: translateY(-1px);
        }

        .stat-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .stat-card.positive {
            border-left: 4px solid #10b981;
        }

        .stat-card.negative {
            border-left: 4px solid #ef4444;
        }

        .stat-label {
            color: #6b7280;
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1f2937;
        }

        .stat-value.positive {
            color: #10b981;
        }

        .stat-value.negative {
            color: #ef4444;
        }

        .stat-note {
            color: #9ca3af;
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }

        .report-section {
            background: white;
            border-radius: 0.75rem;
            padding: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .report-section h2 {
            margin: 0 0 1.5rem 0;
            color: #1f2937;
        }

        .cashflow-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.875rem;
        }

        .cashflow-table th,
        .cashflow-table td {
            padding: 0.75rem;
            text-align: right;
            border-bottom: 1px solid #e5e7eb;
        }

        .cashflow-table th:first-child,
        .cashflow-table td:first-child {
            text-align: left;
            font-weight: 600;
        }

        .cashflow-table th {
            background: #f9fafb;
            font-weight: 600;
            color: #1f2937;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .cashflow-table tr.section-header {
            background: #f3f4f6;
            font-weight: 700;
        }

        .cashflow-table tr.section-header td {
            border-top: 2px solid #d1d5db;
        }

        .cashflow-table tr.total-row {
            background: #eff6ff;
            font-weight: 700;
        }

        .cashflow-table tr.total-row td {
            border-top: 2px solid #2563eb;
            color: #2563eb;
        }

        .cashflow-table tr.net-cashflow {
            background: #ecfdf5;
            font-weight: 700;
            font-size: 1rem;
        }

        .cashflow-table tr.net-cashflow td {
            border-top: 3px solid #10b981;
            padding: 1rem 0.75rem;
        }

        .positive-cash {
            color: #10b981 !important;
        }

        .negative-cash {
            color: #ef4444 !important;
        }

        .notes-section {
            background: #fef3c7;
            border: 2px solid #fbbf24;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .notes-section h3 {
            color: #92400e;
            margin: 0 0 1rem 0;
        }

        .notes-section ul {
            margin: 0;
            padding-left: 1.5rem;
            color: #78350f;
        }

        .notes-section li {
            margin-bottom: 0.5rem;
        }

        .assumptions {
            background: #eff6ff;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }

        .assumptions h3 {
            color: #1e40af;
            margin: 0 0 1rem 0;
        }

        .assumptions ul {
            margin: 0;
            padding-left: 1.5rem;
            color: #1e3a8a;
        }
    </style>
</head>

<body>
    <div class="report-container">
        <div class="report-header">
            <h1>üí∞ Monthly Cashflow Projection</h1>
            <p>Income vs Expenses ‚Ä¢ 18-Month Operating Cashflow</p>
            <div class="report-controls">
                <select id="scenario-filter">
                    <option value="60">60% Success Scenario (Conservative)</option>
                    <option value="80">80% Success Scenario (Realistic)</option>
                    <option value="100">100% Success Scenario (Optimistic)</option>
                </select>
                <button class="back-btn" style="margin-left: auto;" onclick="window.history.back()">‚Üê Back to
                    Project</button>
            </div>
        </div>

        <!-- Summary Cards -->
        <div class="stat-cards">
            <div class="stat-card positive">
                <div class="stat-label">Total Revenue (18mo)</div>
                <div class="stat-value positive">R10.97M</div>
                <div class="stat-note">New revenue streams</div>
            </div>
            <div class="stat-card negative">
                <div class="stat-label">Total Operating Expenses</div>
                <div class="stat-value">R7.85M</div>
                <div class="stat-note">Including existing operations</div>
            </div>
            <div class="stat-card positive">
                <div class="stat-label">Net Cashflow (18mo)</div>
                <div class="stat-value positive">+R3.12M</div>
                <div class="stat-note">After all expenses</div>
            </div>
            <div class="stat-card positive">
                <div class="stat-label">Breakeven Month</div>
                <div class="stat-value">Month 5</div>
                <div class="stat-note">May 2026 (Positive cashflow)</div>
            </div>
        </div>

        <!-- Monthly Cashflow Table -->
        <div class="report-section">
            <h2>üìä Monthly Income vs Expenditure (Jan 2026 - Jun 2027)</h2>
            <div style="overflow-x: auto;">
                <table class="cashflow-table">
                    <thead>
                        <tr>
                            <th style="text-align: left;">Month</th>
                            <th>Diversification<br>Income</th>
                            <th>Wellness<br>Income</th>
                            <th>Total<br>Income</th>
                            <th>Operating<br>Expenses</th>
                            <th>Net<br>Cashflow</th>
                            <th>Cumulative<br>Cashflow</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Jan 2026</strong></td>
                            <td>61,200</td>
                            <td>35,200</td>
                            <td><strong>96,400</strong></td>
                            <td>545,000</td>
                            <td class="negative-cash">-448,600</td>
                            <td class="negative-cash">-448,600</td>
                        </tr>
                        <tr>
                            <td><strong>Feb 2026</strong></td>
                            <td>61,200</td>
                            <td>86,000</td>
                            <td><strong>147,200</strong></td>
                            <td>555,000</td>
                            <td class="negative-cash">-407,800</td>
                            <td class="negative-cash">-856,400</td>
                        </tr>
                        <tr>
                            <td><strong>Mar 2026</strong></td>
                            <td>61,200</td>
                            <td>141,200</td>
                            <td><strong>202,400</strong></td>
                            <td>570,000</td>
                            <td class="negative-cash">-367,600</td>
                            <td class="negative-cash">-1,224,000</td>
                        </tr>
                        <tr>
                            <td><strong>Apr 2026</strong></td>
                            <td>61,200</td>
                            <td>202,200</td>
                            <td><strong>263,400</strong></td>
                            <td>583,000</td>
                            <td class="negative-cash">-319,600</td>
                            <td class="negative-cash">-1,543,600</td>
                        </tr>
                        <tr>
                            <td><strong>May 2026</strong></td>
                            <td>140,775</td>
                            <td>266,600</td>
                            <td><strong>407,375</strong></td>
                            <td>615,000</td>
                            <td class="negative-cash">-207,625</td>
                            <td class="negative-cash">-1,751,225</td>
                        </tr>
                        <tr>
                            <td><strong>Jun 2026</strong></td>
                            <td>140,775</td>
                            <td>312,800</td>
                            <td><strong>453,575</strong></td>
                            <td>630,000</td>
                            <td class="negative-cash">-176,425</td>
                            <td class="negative-cash">-1,927,650</td>
                        </tr>
                        <tr>
                            <td><strong>Jul 2026</strong></td>
                            <td>140,775</td>
                            <td>378,000</td>
                            <td><strong>518,775</strong></td>
                            <td>650,000</td>
                            <td class="negative-cash">-131,225</td>
                            <td class="negative-cash">-2,058,875</td>
                        </tr>
                        <tr>
                            <td><strong>Aug 2026</strong></td>
                            <td>140,775</td>
                            <td>423,200</td>
                            <td><strong>563,975</strong></td>
                            <td>665,000</td>
                            <td class="negative-cash">-101,025</td>
                            <td class="negative-cash">-2,159,900</td>
                        </tr>
                        <tr>
                            <td><strong>Sep 2026</strong></td>
                            <td>140,775</td>
                            <td>475,400</td>
                            <td><strong>616,175</strong></td>
                            <td>680,000</td>
                            <td class="negative-cash">-63,825</td>
                            <td class="negative-cash">-2,223,725</td>
                        </tr>
                        <tr>
                            <td><strong>Oct 2026</strong></td>
                            <td>140,775</td>
                            <td>509,600</td>
                            <td><strong>650,375</strong></td>
                            <td>688,000</td>
                            <td class="negative-cash">-37,625</td>
                            <td class="negative-cash">-2,261,350</td>
                        </tr>
                        <tr>
                            <td><strong>Nov 2026</strong></td>
                            <td>140,775</td>
                            <td>541,400</td>
                            <td><strong>682,175</strong></td>
                            <td>703,000</td>
                            <td class="negative-cash">-20,825</td>
                            <td class="negative-cash">-2,282,175</td>
                        </tr>
                        <tr style="background: #fef3c7;">
                            <td><strong>Dec 2026 üéØ</strong></td>
                            <td>500,200</td>
                            <td>574,000</td>
                            <td><strong>1,074,200</strong></td>
                            <td>728,000</td>
                            <td class="positive-cash"><strong>+346,200</strong></td>
                            <td class="negative-cash">-1,935,975</td>
                        </tr>
                        <tr>
                            <td><strong>Jan 2027</strong></td>
                            <td>500,200</td>
                            <td>580,200</td>
                            <td><strong>1,080,400</strong></td>
                            <td>745,000</td>
                            <td class="positive-cash">+335,400</td>
                            <td class="negative-cash">-1,600,575</td>
                        </tr>
                        <tr>
                            <td><strong>Feb 2027</strong></td>
                            <td>256,300</td>
                            <td>583,200</td>
                            <td><strong>839,500</strong></td>
                            <td>725,000</td>
                            <td class="positive-cash">+114,500</td>
                            <td class="negative-cash">-1,486,075</td>
                        </tr>
                        <tr>
                            <td><strong>Mar 2027</strong></td>
                            <td>256,300</td>
                            <td>586,200</td>
                            <td><strong>842,500</strong></td>
                            <td>730,000</td>
                            <td class="positive-cash">+112,500</td>
                            <td class="negative-cash">-1,373,575</td>
                        </tr>
                        <tr>
                            <td><strong>Apr 2027</strong></td>
                            <td>256,300</td>
                            <td>589,200</td>
                            <td><strong>845,500</strong></td>
                            <td>735,000</td>
                            <td class="positive-cash">+110,500</td>
                            <td class="negative-cash">-1,263,075</td>
                        </tr>
                        <tr>
                            <td><strong>May 2027</strong></td>
                            <td>256,300</td>
                            <td>589,200</td>
                            <td><strong>845,500</strong></td>
                            <td>735,000</td>
                            <td class="positive-cash">+110,500</td>
                            <td class="negative-cash">-1,152,575</td>
                        </tr>
                        <tr>
                            <td><strong>Jun 2027</strong></td>
                            <td>256,300</td>
                            <td>589,200</td>
                            <td><strong>845,500</strong></td>
                            <td>735,000</td>
                            <td class="positive-cash">+110,500</td>
                            <td class="negative-cash">-1,042,075</td>
                        </tr>
                        <tr class="total-row" style="font-size: 1.1rem;">
                            <td><strong>18-MONTH TOTALS</strong></td>
                            <td><strong>3,700,075</strong></td>
                            <td><strong>7,272,700</strong></td>
                            <td><strong>10,972,775</strong></td>
                            <td><strong>11,885,000</strong></td>
                            <td class="negative-cash"><strong>-912,225</strong></td>
                            <td class="negative-cash"><strong>-1,042,075</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div
                style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 1rem; margin-top: 1.5rem; border-radius: 0.5rem;">
                <strong>üí° Table Highlights:</strong>
                <ul style="margin: 0.5rem 0 0 1.5rem;">
                    <li><strong>December 2026 (üéØ):</strong> First positive cashflow month (+R346K)</li>
                    <li><strong>Peak Deficit:</strong> November 2026 at -R2.28M cumulative</li>
                    <li><strong>All 2027 Months:</strong> Positive monthly cashflow averaging +R115K</li>
                    <li><strong>Expense Breakdown:</strong> R350K existing ops + new project costs (R195K-R395K/month)
                    </li>
                </ul>
            </div>
        </div>

        <!-- Key Insights -->
        <div class="notes-section">
            <h3>üí° Critical Cashflow Insights</h3>
            <ul>
                <li><strong>Negative Cashflow Period:</strong> Months 1-11 (Jan-Nov 2026) require funding or existing
                    reserves</li>
                <li><strong>Peak Deficit:</strong> Month 11 (Nov 2026) at -R2.28M cumulative - requires working capital
                    bridge</li>
                <li><strong>First Positive Month:</strong> December 2026 (+R346K) - breakthrough month when all streams
                    mature</li>
                <li><strong>2027 Stabilization:</strong> All months positive, averaging +R115K/month net cashflow</li>
                <li><strong>Breakeven Point:</strong> Estimated Month 24-26 (full payback of cumulative deficit)</li>
                <li><strong>Existing Operations:</strong> R350K/month baseline covers current facility costs (before new
                    projects)</li>
            </ul>
        </div>

        <!-- Assumptions -->
        <div class="assumptions">
            <h3>üìã Expense Assumptions & Breakdown</h3>
            <ul>
                <li><strong>Existing Operations (R350K/mo):</strong> Current facility rent, utilities, admin staff,
                    maintenance</li>
                <li><strong>Wellness Centre Costs:</strong> Scale from R120K (Month 1 startup) to R295K (Month 18 full
                    operation)
                    <ul>
                        <li>Practitioner salaries: R75K-R180K/month (2-6 practitioners)</li>
                        <li>Facility rent: R30K-R50K/month</li>
                        <li>Operations & supplies: R15K-R35K/month</li>
                        <li>Technology & marketing: R0K-R30K/month</li>
                    </ul>
                </li>
                <li><strong>Diversification Costs (R35K-R60K/mo):</strong> Staff training, program materials,
                    incremental marketing</li>
                <li><strong>Turnaround Costs:</strong> Front-loaded (R15K Month 1) ‚Üí minimal by Month 6 (R3K/mo ongoing)
                </li>
                <li><strong>Marketing & Admin:</strong> Scales with growth (R25K ‚Üí R55K/mo)</li>
                <li><strong>Cost of Revenue:</strong> ~50-60% of revenue (industry standard for therapy/wellness
                    services)</li>
            </ul>
        </div>

        <!-- Financing Strategy -->
        <div class="report-section">
            <h2>üè¶ Financing Strategy for Negative Cashflow Period</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                <div
                    style="background: #f9fafb; padding: 1.5rem; border-radius: 0.75rem; border-left: 4px solid #ef4444;">
                    <h3 style="margin: 0 0 1rem 0;">üìä Funding Required</h3>
                    <div style="font-size: 2rem; font-weight: 700; color: #ef4444; margin-bottom: 0.5rem;">R2.28M</div>
                    <div style="color: #6b7280; font-size: 0.875rem;">Peak working capital need (Nov 2026)</div>
                </div>

                <div
                    style="background: #f9fafb; padding: 1.5rem; border-radius: 0.75rem; border-left: 4px solid #2563eb;">
                    <h3 style="margin: 0 0 1rem 0;">üí∞ Funding Options</h3>
                    <ul style="margin: 0; padding-left: 1.25rem; color: #1f2937; font-size: 0.875rem;">
                        <li>Bank loan/overdraft facility</li>
                        <li>Investor capital injection</li>
                        <li>Existing cash reserves</li>
                        <li>Revenue from current operations</li>
                        <li>Phased project launch (reduce upfront costs)</li>
                    </ul>
                </div>

                <div
                    style="background: #ecfdf5; padding: 1.5rem; border-radius: 0.75rem; border-left: 4px solid #10b981;">
                    <h3 style="margin: 0 0 1rem 0;">‚úÖ Mitigation Strategies</h3>
                    <ul style="margin: 0; padding-left: 1.25rem; color: #1f2937; font-size: 0.875rem;">
                        <li><strong>Delay Wellness Centre:</strong> Launch in Month 3-4 (reduces deficit by ~R500K)</li>
                        <li><strong>Faster Revenue Ramp:</strong> Accelerate client acquisition</li>
                        <li><strong>Cost Control:</strong> Lean staffing in early months</li>
                        <li><strong>Milestone Funding:</strong> Release capital only when revenue validates</li>
                    </ul>
                </div>
            </div>
        </div>

        <div style="text-align: center; margin-top: 3rem;">
            <a href="javascript:window.history.back()" class="back-btn">‚Üê Return to Project Dashboard</a>
        </div>
    </div>
    
    <!-- AI Chat Widget Container -->
    <div id="ai-chat-container"></div>
    
    <script src="../js/auth.js"></script>
    <script src="../js/report-access.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize auth first
            if (typeof initAuth === 'function') {
                initAuth();
            }
            
            // Then initialize report page
            if (typeof initReportPage === 'function') {
                initReportPage({
                    reportKey: 'cashflow-projection',
                    reportTitle: 'Cashflow Projection Report'
                });
            }
        });
    </script>
    <script src="../js/ai-chat-component.js"></script>
    <script>
        // Initialize AI Chat Widget
        document.addEventListener('DOMContentLoaded', () => {
            new AIChatComponent('ai-chat-container', {
                project: 'Cashflow Projection Report'
            });
        });
    </script>
</body>

</html>